/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const t=document.querySelector(".container"),e=t.querySelector(".input-text"),n=t.querySelector(".posts-list"),s=t.querySelector(".error-modal"),a=t.querySelector(".error-message"),o=t.querySelector(".form"),r=t.querySelector(".input-location"),l=t.querySelector(".cancel-button"),i=new Date,c=i.getFullYear(),d=$(i.getMonth()+1),u=$(i.getDate()),p=$(i.getHours()),g=$(i.getMinutes());let v,m;const y=[];function $(t){return t<10?`0${t}`:t}window.onload=function(){!function(){const t=localStorage.editorData;if(!t)return;const e=JSON.parse(t);for(let t=0;t<e.arr.length;t++){const s=document.createElement("li");s.classList.add("post"),s.innerHTML=`\n\t\t<div class="post-header">\n\t\t\t<span class="date">${e.arr[t].day}.${e.arr[t].month}.${e.arr[t].year}</span>\n\t\t\t<span class="time">${e.arr[t].hours}:${e.arr[t].minutes}</span>\n\t\t</div>\n\t\t<p>${e.arr[t].text}</p>\n\t\t<span class="geolocation">[${e.arr[t].latitude}, ${e.arr[t].longitude}]</span>\n\t\t`,n.prepend(s),y.push(e.arr[t])}}()},navigator.geolocation.getCurrentPosition((function(t){v=t.coords.latitude,m=t.coords.longitude}),(function(){s.classList.add("showed"),l.addEventListener("click",(()=>{s.classList.remove("showed")})),o.addEventListener("submit",(t=>{t.preventDefault(),""!==r.value&&function(t,e){const n=/^(\[?-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?\]?)$/.exec(t);n?(n[1].startsWith("[")&&(n[1]=n[1].substring(1)),v=parseFloat(n[1]),m=parseFloat(n[2]),console.log(v,m),s.classList.remove("showed"),console.log(o.checkValidity())):(console.log("Invalid coordinates"),e.setCustomValidity("Введите корректные координаты!"),e.classList.add("invalid"),a.classList.remove("hidden"),console.log(o.checkValidity()))}(r.value,r)}))})),document.addEventListener("keyup",(t=>{if("Enter"===t.key&&""!==e.value){const t=document.createElement("li");t.classList.add("post"),t.innerHTML=`\n\t\t<div class="post-header">\n\t\t\t<span class="date">${u}.${d}.${c}</span>\n\t\t\t<span class="time">${p}:${g}</span>\n\t\t</div>\n\t\t<p>${e.value}</p>\n\t\t<span class="geolocation">[${v}, ${m}]</span>\n\t\t`,n.prepend(t),y.push({day:u,month:d,year:c,hours:p,minutes:g,text:e.value,latitude:v,longitude:m}),s=y,localStorage.editorData=JSON.stringify({arr:s}),e.value=""}var s}))})();
//# sourceMappingURL=main.js.map